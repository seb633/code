#include "variable.h"
#include "config.h"

sample objSample;
rated objRated;
dataCalc objDataCalc;
standard objDftStd;
mppt objMppt;
mppt objMppt2;
buckboost objBuckBoost;
buckboost objBuckBoost2;
protocol objProtocol;
flashSave objFlashSave;

/*
	串口     | PIN  |   DMA通道
-------------+------+---------------
   USART0-TX | PB6  | DMA0-CH3  
   USART0-RX | PB7  | DMA0-CH4  	
-------------+------+---------------
	UART3-TX | PC10 | DMA1-CH4  
	UART3-RX | PC11 | DMA1-CH2  
-------------+------+---------------
	UART4-TX | PC12 |  -----
	UART4-RX | PD2  |  -----
-------------+------+---------------

*/

//UART3=RS485_1
uartPara comm0Para = 
{
    RCU_UART3, RCU_GPIOC, RCU_GPIOC, RCU_GPIOA, UART3, 16, USART_WL_8BIT, USART_MSBF_LSB, USART_STB_1BIT, USART_PM_NONE,
    115200UL, GPIOC, GPIO_PIN_10, GPIOC, GPIO_PIN_11, GPIOA, GPIO_PIN_15, 0, RCU_DMA1, DMA1, DMA_CH4, (uint32_t)(&USART_DATA(UART3))
};
//UART4=RS485_2
uartPara comm1Para = 
{
    RCU_UART4, RCU_GPIOC, RCU_GPIOD, RCU_GPIOB, UART4, 16*12, USART_WL_8BIT, USART_MSBF_LSB, USART_STB_1BIT, USART_PM_NONE,
    9600UL, GPIOC, GPIO_PIN_12, GPIOD, GPIO_PIN_2, GPIOB, GPIO_PIN_3, 0, RCU_DMA1, 0, DMA_CH4, (uint32_t)(&USART_DATA(UART4))
};

const FLOAT32 g_NtcBreakPoint[146] = 
{ 
0.584000f, 0.601000f, 0.618000f, 0.636000f, 0.655000f, 0.674000f, 0.694000f, 0.715000f, 0.736000f, 0.758000f,
0.781000f, 0.805000f, 0.830000f, 0.856000f, 0.882000f, 0.910000f, 0.938000f, 0.969000f, 1.000000f, 1.031000f,
1.064000f, 1.098000f, 1.133000f, 1.170000f, 1.208000f, 1.248000f, 1.289000f, 1.331000f, 1.376000f, 1.422000f,
1.470000f, 1.519000f, 1.571000f, 1.625000f, 1.681000f, 1.739000f, 1.800000f, 1.863000f, 1.928000f, 1.997000f,
2.068000f, 2.142000f, 2.219000f, 2.300000f, 2.384000f, 2.472000f, 2.563000f, 2.658000f, 2.758000f, 2.861000f,
2.970000f, 3.083000f, 3.201000f, 3.324000f, 3.453000f, 3.588000f, 3.729000f, 3.877000f, 4.031000f, 4.192000f,
4.369000f, 4.544000f, 4.727000f, 4.919000f, 5.119000f, 5.328000f, 5.548000f, 5.778000f, 6.018000f, 6.270000f,
6.534000f, 6.811000f, 7.101000f, 7.405000f, 7.724000f, 8.059000f, 8.411000f, 8.779000f, 9.166000f, 9.573000f,
10.000000f, 10.449000f, 10.920000f, 11.416000f, 11.938000f, 12.486000f, 13.063000f, 13.670000f, 14.310000f, 14.983000f,
15.692000f, 16.439000f, 17.227000f, 18.057000f, 18.932000f, 19.856000f, 20.830000f, 21.859000f, 22.945000f, 24.092000f,
25.303000f, 26.584000f, 27.937000f, 29.346000f, 30.871000f, 32.485000f, 34.195000f, 36.007000f, 37.928000f, 39.965000f,
42.126000f, 44.418000f, 46.852000f, 49.436000f, 52.181000f, 55.099000f, 58.200000f, 61.499000f, 65.008000f, 68.743000f,
72.720000f, 76.957000f, 81.471000f, 86.283000f, 91.415000f, 96.891000f, 102.740000f, 108.980000f, 115.640000f, 122.770000f,
130.390000f, 138.540000f, 147.260000f, 156.590000f, 166.590000f, 177.310000f, 188.800000f, 201.120000f, 214.340000f, 228.540000f,
243.790000f, 260.170000f, 277.790000f, 296.740000f, 317.140000f, 339.100000f
};

const line g_NtcLine[] = 
{
    {0.0f, 105.000000f},
    {-58.823529f, 139.352941f},
    {-58.823529f, 139.352941f},
    {-55.555556f, 137.333333f},
    {-52.631579f, 135.473684f},
    {-52.631579f, 135.473684f},
    {-50.000000f, 133.700000f},
    {-47.619048f, 132.047619f},
    {-47.619048f, 132.047619f},
    {-45.454545f, 130.454545f},
    {-43.478261f, 128.956522f},
    {-41.666667f, 127.541667f},
    {-40.000000f, 126.200000f},
    {-38.461538f, 124.923077f},
    {-38.461538f, 124.923077f},
    {-35.714286f, 122.500000f},
    {-35.714286f, 122.500000f},
    {-32.258065f, 119.258065f},
    {-32.258065f, 119.258065f},
    {-32.258065f, 119.258065f},
    {-30.303030f, 117.242424f},
    {-29.411765f, 116.294118f},
    {-28.571429f, 115.371429f},
    {-27.027027f, 113.621622f},
    {-26.315789f, 112.789474f},
    {-25.000000f, 111.200000f},
    {-24.390244f, 110.439024f},
    {-23.809524f, 109.690476f},
    {-22.222222f, 107.577778f},
    {-21.739130f, 106.913043f},
    {-20.833333f, 105.625000f},
    {-20.408163f, 105.000000f},
    {-19.230769f, 103.211538f},
    {-18.518519f, 102.092593f},
    {-17.857143f, 101.017857f},
    {-17.241379f, 99.982759f},
    {-16.393443f, 98.508197f},
    {-15.873016f, 97.571429f},
    {-15.384615f, 96.661538f},
    {-14.492754f, 94.942029f},
    {-14.084507f, 94.126761f},
    {-13.513514f, 92.945946f},
    {-12.987013f, 91.818182f},
    {-12.345679f, 90.395062f},
    {-11.904762f, 89.380952f},
    {-11.363636f, 88.090909f},
    {-10.989011f, 87.164835f},
    {-10.526316f, 85.978947f},
    {-10.000000f, 84.580000f},
    {-9.708738f, 83.776699f},
    {-9.174312f, 82.247706f},
    {-8.849558f, 81.283186f},
    {-8.474576f, 80.127119f},
    {-8.130081f, 79.024390f},
    {-7.751938f, 77.767442f},
    {-7.407407f, 76.577778f},
    {-7.092199f, 75.446809f},
    {-6.756757f, 74.195946f},
    {-6.493506f, 73.175325f},
    {-6.211180f, 72.037267f},
    {-5.649718f, 69.683616f},
    {-5.714286f, 69.965714f},
    {-5.464481f, 68.830601f},
    {-5.208333f, 67.619792f},
    {-5.000000f, 66.595000f},
    {-4.784689f, 65.492823f},
    {-4.545455f, 64.218182f},
    {-4.347826f, 63.121739f},
    {-4.166667f, 62.075000f},
    {-3.968254f, 60.880952f},
    {-3.787879f, 59.750000f},
    {-3.610108f, 58.588448f},
    {-3.448276f, 57.486207f},
    {-3.289474f, 56.358553f},
    {-3.134796f, 55.213166f},
    {-2.985075f, 54.056716f},
    {-2.840909f, 52.894886f},
    {-2.717391f, 51.855978f},
    {-2.583979f, 50.684755f},
    {-2.457002f, 49.520885f},
    {-2.341920f, 48.419204f},
    {-2.227171f, 47.271715f},
    {-2.123142f, 46.184713f},
    {-2.016129f, 45.016129f},
    {-1.915709f, 43.869732f},
    {-1.824818f, 42.784672f},
    {-1.733102f, 41.639515f},
    {-1.647446f, 40.520593f},
    {-1.562500f, 39.359375f},
    {-1.485884f, 38.263001f},
    {-1.410437f, 37.132581f},
    {-1.338688f, 36.006693f},
    {-1.269036f, 34.861675f},
    {-1.204819f, 33.755422f},
    {-1.142857f, 32.636571f},
    {-1.082251f, 31.489177f},
    {-1.026694f, 30.386037f},
    {-0.971817f, 29.242954f},
    {-0.920810f, 28.127993f},
    {-0.871840f, 27.004359f},
    {-0.825764f, 25.894302f},
    {-0.780640f, 24.752537f},
    {-0.739098f, 23.648189f},
    {-0.709723f, 22.827537f},
    {-0.655738f, 21.243279f},
    {-0.619579f, 20.127014f},
    {-0.584795f, 18.997076f},
    {-0.551876f, 17.871413f},
    {-0.520562f, 16.743883f},
    {-0.490918f, 15.619539f},
    {-0.462749f, 14.493753f},
    {-0.436300f, 13.379581f},
    {-0.410846f, 12.248973f},
    {-0.386997f, 11.131579f},
    {-0.364299f, 10.009472f},
    {-0.342700f, 8.882454f},
    {-0.322477f, 7.768139f},
    {-0.303122f, 6.641710f},
    {-0.284981f, 5.526076f},
    {-0.267738f, 4.405087f},
    {-0.251446f, 3.285140f},
    {-0.236016f, 2.163087f},
    {-0.221533f, 1.048516f},
    {-0.207814f, -0.069202f},
    {-0.194856f, -1.187256f},
    {-0.182615f, -2.306245f},
    {-0.170969f, -3.434604f},
    {-0.160256f, -4.535256f},
    {-0.150150f, -5.636637f},
    {-0.140252f, -6.781206f},
    {-0.131234f, -7.888451f},
    {-0.122699f, -9.001227f},
    {-0.114679f, -10.112385f},
    {-0.107181f, -11.216506f},
    {-0.100000f, -12.341000f},
    {-0.093284f, -13.459888f},
    {-0.087032f, -14.568320f},
    {-0.081169f, -15.675325f},
    {-0.075643f, -16.786687f},
    {-0.070423f, -17.905634f},
    {-0.065574f, -19.013770f},
    {-0.061050f, -20.116606f},
    {-0.056754f, -21.234393f},
    {-0.052770f, -22.340897f},
    {-0.049020f, -23.453922f},
    {-0.045537f, -24.558288f},
    {0.0f, -40.000000f}
};

const Info info __attribute__ ((at(APP_INFO))) =
{
    {HwVerHigh,	HwVerMid,	HwVerLow, 0xcc, 0xcc, 0xcc, 0xcc},	//HW 
    {SwVerHigh,	SwVerMid,	SwVerLow, 0xcc, 0xcc, 0xcc, 0xcc},	//SW
    {Suppliers, 0xcc, 		0xcc, 		0xcc, 0xcc, 0xcc, 0xcc}	//OTHER
};

